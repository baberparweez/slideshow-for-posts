{"version":3,"file":"view.js","mappings":"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","sources":["webpack://slideshow-for-posts/./src/view.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\n\tdocument\n\t\t.querySelectorAll(\".slideshow_for_posts--container\")\n\t\t.forEach((container) => {\n\t\t\t// Initial API call setup\n\t\t\tconst numberOfPosts = container.getAttribute(\"data-num-posts\") || \"3\";\n\t\t\tconst sortOrder = container.getAttribute(\"data-sort-order\") || \"desc\";\n\t\t\tconst customApiUrl =\n\t\t\t\tcontainer.getAttribute(\"data-custom-api-url\") || \"https://wptavern.com\";\n\t\t\tconst initialApiUrl = `${customApiUrl}/wp-json/wp/v2/posts?_embed&per_page=${numberOfPosts}&order=${sortOrder}&orderby=date`;\n\n\t\t\t// Fetch initial posts\n\t\t\tfetchAndUpdatePosts(initialApiUrl, container, numberOfPosts, sortOrder);\n\t\t});\n});\n\nfunction renderPosts(posts, container) {\n\tlet slidesOuter = container.querySelector(\n\t\t\".slideshow_for_posts--slides_outer\",\n\t);\n\tlet slidesContainer = container.querySelector(\".slideshow_for_posts--slides\");\n\tif (!slidesContainer && !slidesContainer) {\n\t\tslidesOuter = document.createElement(\"div\");\n\t\tslidesOuter.className = \"slideshow_for_posts--slides_outer\";\n\t\tcontainer.appendChild(slidesOuter);\n\n\t\tslidesContainer = document.createElement(\"div\");\n\t\tslidesContainer.className = \"slideshow_for_posts--slides\";\n\t\tslidesOuter.appendChild(slidesContainer);\n\t} else {\n\t\tslidesContainer.innerHTML = \"\"; // Clear existing slides for new content\n\t}\n\n\tposts.forEach((post) => {\n\t\tconst slide = document.createElement(\"div\");\n\t\tslide.className = \"slideshow_for_posts--slide\";\n\n\t\tconst title = post.title.rendered;\n\t\tconst imageUrl = post._embedded[\"wp:featuredmedia\"]\n\t\t\t? post._embedded[\"wp:featuredmedia\"][0].source_url\n\t\t\t: \"\";\n\t\tconst date = new Date(post.date).toLocaleDateString();\n\t\tconst excerpt = post.excerpt.rendered;\n\t\tconst link = post.link;\n\n\t\tslide.innerHTML = `\n            <div class=\"slideshow_for_posts--content\">\n                ${imageUrl ? `<img src=\"${imageUrl}\" alt=\"${title}\" />` : \"\"}\n                <a href=\"${link}\" target=\"_blank\"><h4 class=\"title\">${title}</h4></a>\n                <p class=\"date\">${date}</p>\n                <div class=\"excerpt\">${excerpt}</div>\n                <a class=\"button\" href=\"${link}\" target=\"_blank\">Read more</a>\n            </div>\n        `;\n\n\t\tslidesOuter.appendChild(slidesContainer);\n\t\tslidesContainer.appendChild(slide);\n\t});\n\n\t// Add or update the form for custom API URL input\n\tlet form = container.querySelector(\"form\");\n\tif (!form) {\n\t\tform = document.createElement(\"form\");\n\t\tform.classList.add(\"slideshow_for_posts--form\");\n\t\tform.innerHTML = `\n              <input type=\"text\" id=\"customApiUrl\" placeholder=\"Enter WordPress site URL\" />\n              <button type=\"submit\">New Posts</button>\n          `;\n\t\tslidesOuter.prepend(form);\n\t}\n\n\tform.onsubmit = (e) => {\n\t\te.preventDefault();\n\t\tconst numberOfPosts = container.getAttribute(\"data-num-posts\") || \"3\";\n\t\tconst sortOrder = container.getAttribute(\"data-sort-order\") || \"desc\";\n\t\tconst customApiUrl = form.querySelector(\"#customApiUrl\").value.trim();\n\t\tif (customApiUrl) {\n\t\t\t// Adjusted API call to use the provided URL\n\t\t\tconst fullApiUrl = `${customApiUrl}/wp-json/wp/v2/posts?_embed&per_page=${numberOfPosts}&order=${sortOrder}&orderby=date`;\n\t\t\tfetchAndUpdatePosts(fullApiUrl, container, numberOfPosts, sortOrder);\n\t\t}\n\t};\n\n\t// Reinitialize the slider\n\tsetupSlider(container);\n}\n\nfunction fetchAndUpdatePosts(apiUrl, container, numberOfPosts, sortOrder) {\n\tconst cacheKey = `posts_${encodeURIComponent(apiUrl)}`;\n\n\tconst cachedPosts = sessionStorage.getItem(cacheKey);\n\tif (cachedPosts) {\n\t\tconst posts = JSON.parse(cachedPosts);\n\t\trenderPosts(posts, container);\n\t\tsetupSlider(container);\n\t} else {\n\t\tfetch(\n\t\t\t`${apiUrl}/wp-json/wp/v2/posts?_embed&per_page=${numberOfPosts}&order=${sortOrder}&orderby=date`,\n\t\t)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((posts) => {\n\t\t\t\tsessionStorage.setItem(cacheKey, JSON.stringify(posts));\n\t\t\t\trenderPosts(posts, container);\n\t\t\t\tsetupSlider(container);\n\t\t\t})\n\t\t\t.catch((error) => console.error(\"Fetching posts failed:\", error));\n\t}\n}\n\nfunction setupSlider(container) {\n\tconst existingNextBtn = container.querySelector(\".slideshow_for_posts--next\");\n\tconst existingPrevBtn = container.querySelector(\".slideshow_for_posts--prev\");\n\tif (existingNextBtn) existingNextBtn.remove();\n\tif (existingPrevBtn) existingPrevBtn.remove();\n\n\tlet currentIndex = 0;\n\tconst slidesContainer = container.querySelector(\n\t\t\".slideshow_for_posts--slides\",\n\t);\n\tconst slides = slidesContainer.querySelectorAll(\n\t\t\".slideshow_for_posts--slide\",\n\t);\n\tconst totalSlides = slides.length;\n\tlet startX, endX;\n\n\tfunction updateActiveSlide() {\n\t\tslides.forEach((slide, index) => {\n\t\t\tif (index === currentIndex) {\n\t\t\t\tslide.classList.add(\"active\");\n\t\t\t} else {\n\t\t\t\tslide.classList.remove(\"active\");\n\t\t\t}\n\t\t});\n\t}\n\n\t// Initialize the first slide as active\n\tupdateActiveSlide();\n\n\tfunction updateSlidePosition() {\n\t\tconst newTransformValue = `translateX(-${currentIndex * 100}%)`;\n\t\tslidesContainer.style.transform = newTransformValue;\n\t}\n\n\tfunction goToNextSlide() {\n\t\tcurrentIndex = (currentIndex + 1) % totalSlides;\n\t\tupdateActiveSlide();\n\t\tupdateSlidePosition();\n\t}\n\n\tfunction goToPreviousSlide() {\n\t\tcurrentIndex = (currentIndex - 1 + totalSlides) % totalSlides;\n\t\tupdateActiveSlide();\n\t\tupdateSlidePosition();\n\t}\n\n\tconst onDragStart = (e) => {\n\t\tstartX = e.clientX;\n\t};\n\n\tconst onDragEnd = (e) => {\n\t\tendX = e.clientX;\n\t\tconst threshold = 50; // Minimum distance to trigger a slide change\n\t\tif (startX - endX > threshold) {\n\t\t\tgoToNextSlide(); // Go to next slide\n\t\t} else if (endX - startX > threshold) {\n\t\t\tgoToPreviousSlide(); // Go to previous slide\n\t\t}\n\t};\n\n\t// Attach the mouse event listeners to the container\n\tcontainer.addEventListener(\"mousedown\", onDragStart);\n\tcontainer.addEventListener(\"mouseup\", onDragEnd);\n\n\t// Optionally, add touch event listeners for mobile devices\n\tcontainer.addEventListener(\"touchstart\", (e) => onDragStart(e.touches[0]));\n\tcontainer.addEventListener(\"touchend\", (e) => onDragEnd(e.changedTouches[0]));\n\n\t// Create navigation if more than one slide\n\tif (slides.length > 1) {\n\t\tconst prevBtn = document.createElement(\"button\");\n\t\tprevBtn.innerHTML =\n\t\t\t'<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\"><path d=\"M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8.009 8.009 0 0 1-8 8z\"/><path d=\"M13.293 7.293 8.586 12l4.707 4.707 1.414-1.414L11.414 12l3.293-3.293-1.414-1.414z\"/></svg>';\n\t\tprevBtn.classList.add(\"slideshow_for_posts--prev\");\n\t\tprevBtn.addEventListener(\"click\", goToPreviousSlide);\n\n\t\tconst nextBtn = document.createElement(\"button\");\n\t\tnextBtn.innerHTML =\n\t\t\t'<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\"><path d=\"M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8.009 8.009 0 0 1-8 8z\"/><path d=\"M13.293 7.293 8.586 12l4.707 4.707 1.414-1.414L11.414 12l3.293-3.293-1.414-1.414z\"/></svg>';\n\t\tnextBtn.classList.add(\"slideshow_for_posts--next\");\n\t\tnextBtn.addEventListener(\"click\", goToNextSlide);\n\n\t\tcontainer.appendChild(prevBtn);\n\t\tcontainer.appendChild(nextBtn);\n\t}\n}\n"],"names":["document","addEventListener","querySelectorAll","forEach","container","numberOfPosts","getAttribute","sortOrder","customApiUrl","initialApiUrl","fetchAndUpdatePosts","renderPosts","posts","slidesOuter","querySelector","slidesContainer","createElement","className","appendChild","innerHTML","post","slide","title","rendered","imageUrl","_embedded","source_url","date","Date","toLocaleDateString","excerpt","link","form","classList","add","prepend","onsubmit","e","preventDefault","value","trim","fullApiUrl","setupSlider","apiUrl","cacheKey","encodeURIComponent","cachedPosts","sessionStorage","getItem","JSON","parse","fetch","then","response","json","setItem","stringify","catch","error","console","existingNextBtn","existingPrevBtn","remove","currentIndex","slides","totalSlides","length","startX","endX","updateActiveSlide","index","updateSlidePosition","newTransformValue","style","transform","goToNextSlide","goToPreviousSlide","onDragStart","clientX","onDragEnd","threshold","touches","changedTouches","prevBtn","nextBtn"],"sourceRoot":""}