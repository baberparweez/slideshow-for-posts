(()=>{function e(e,o){let n=o.querySelector(".slideshow_for_posts--slides_outer"),r=o.querySelector(".slideshow_for_posts--slides");r||r?r.innerHTML="":(n=document.createElement("div"),n.className="slideshow_for_posts--slides_outer",o.appendChild(n),r=document.createElement("div"),r.className="slideshow_for_posts--slides",n.appendChild(r)),e.forEach((e=>{const t=document.createElement("div");t.className="slideshow_for_posts--slide";const s=e.title.rendered,o=e._embedded["wp:featuredmedia"]?e._embedded["wp:featuredmedia"][0].source_url:"",a=new Date(e.date).toLocaleDateString(),d=e.excerpt.rendered,i=e.link;t.innerHTML=`\n            <div class="slideshow_for_posts--content">\n                ${o?`<img src="${o}" alt="${s}" />`:""}\n                <a href="${i}" target="_blank"><h4 class="title">${s}</h4></a>\n                <p class="date">${a}</p>\n                <div class="excerpt">${d}</div>\n                <a class="button" href="${i}" target="_blank">Read more</a>\n            </div>\n        `,n.appendChild(r),r.appendChild(t)}));let a=o.querySelector("form");a||(a=document.createElement("form"),a.classList.add("slideshow_for_posts--form"),a.innerHTML='\n              <input type="text" id="customApiUrl" placeholder="Enter WordPress site URL" />\n              <button type="submit">New Posts</button>\n          ',n.prepend(a)),a.onsubmit=e=>{e.preventDefault();const s=o.getAttribute("data-num-posts")||"3",n=o.getAttribute("data-sort-order")||"desc",r=a.querySelector("#customApiUrl").value.trim();r&&t(`${r}/wp-json/wp/v2/posts?_embed&per_page=${s}&order=${n}&orderby=date`,o,s,n)},s(o)}function t(t,o,n,r){const a=`posts_${encodeURIComponent(t)}`,d=sessionStorage.getItem(a);d?(e(JSON.parse(d),o),s(o)):fetch(`${t}/wp-json/wp/v2/posts?_embed&per_page=${n}&order=${r}&orderby=date`).then((e=>e.json())).then((t=>{sessionStorage.setItem(a,JSON.stringify(t)),e(t,o),s(o)})).catch((e=>console.error("Fetching posts failed:",e)))}function s(e){const t=e.querySelector(".slideshow_for_posts--next"),s=e.querySelector(".slideshow_for_posts--prev");t&&t.remove(),s&&s.remove();let o=0;const n=e.querySelector(".slideshow_for_posts--slides"),r=n.querySelectorAll(".slideshow_for_posts--slide"),a=r.length;let d;function i(){r.forEach(((e,t)=>{t===o?e.classList.add("active"):e.classList.remove("active")}))}function l(){const e=`translateX(-${100*o}%)`;n.style.transform=e}i();const c=e=>{d="touchstart"===e.type?e.touches[0].clientX:e.clientX,currentX=d,n.style.cursor="grabbing"},u=e=>{if(e.preventDefault(),"touchmove"!==e.type)return;currentX=e.touches[0].clientX;const t=currentX-d,s=n.offsetWidth,o=(a-1)*s,r=Math.min(Math.max(-o,t),0);n.style.transform=`translateX(${r}px)`},p=e=>{const t="touchend"===e.type?e.changedTouches[0].clientX:e.clientX;n.offsetWidth,t-d>50?0===o?(n.style.transition="none",o=a-1,i(),n.style.transform=`translateX(-${100*a}%)`,setTimeout((()=>{n.style.transition="transform 0.3s ease-in-out",l()}),10)):(o--,i(),l()):d-t>50?o===a-1?(n.style.transition="none",o=0,i(),n.style.transform=`translateX(${100*a}%)`,setTimeout((()=>{n.style.transition="transform 0.3s ease-in-out",l()}),10)):(o++,i(),l()):l(),currentX=null,n.style.cursor=""};if(e.addEventListener("touchstart",c),e.addEventListener("touchmove",u),e.addEventListener("touchend",p),e.addEventListener("mousedown",c),e.addEventListener("mousemove",u),e.addEventListener("mouseup",p),r.length>1){const t=document.createElement("button");t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8.009 8.009 0 0 1-8 8z"/><path d="M13.293 7.293 8.586 12l4.707 4.707 1.414-1.414L11.414 12l3.293-3.293-1.414-1.414z"/></svg>',t.classList.add("slideshow_for_posts--prev"),t.addEventListener("click",(function(){0===o?(n.style.transition="none",o=a-1,i(),n.style.transform=`translateX(-${100*a}%)`,setTimeout((()=>{n.style.transition="transform 0.3s ease",l()}),10)):(o--,i(),l())}));const s=document.createElement("button");s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8.009 8.009 0 0 1-8 8z"/><path d="M13.293 7.293 8.586 12l4.707 4.707 1.414-1.414L11.414 12l3.293-3.293-1.414-1.414z"/></svg>',s.classList.add("slideshow_for_posts--next"),s.addEventListener("click",(function(){o===a-1?(n.style.transition="none",o=0,i(),n.style.transform=`translateX(${100*a}%)`,setTimeout((()=>{n.style.transition="transform 0.3s ease",l()}),10)):(o++,i(),l())})),e.appendChild(t),e.appendChild(s)}}document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".slideshow_for_posts--container").forEach((e=>{const s=e.getAttribute("data-num-posts")||"3",o=e.getAttribute("data-sort-order")||"desc";t(`${e.getAttribute("data-custom-api-url")||"https://wptavern.com"}/wp-json/wp/v2/posts?_embed&per_page=${s}&order=${o}&orderby=date`,e,s,o),document.addEventListener("keydown",(function(t){const s=e.querySelector(".slideshow_for_posts--prev"),o=e.querySelector(".slideshow_for_posts--next");"ArrowLeft"===t.key&&s?s.click():"ArrowRight"===t.key&&o&&o.click()}))}))}))})();